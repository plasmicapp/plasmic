// This is a skeleton starter React component generated by Plasmic.
// This file is owned by you, feel free to edit as you see fit.
import { getFormattedDate } from "@/wab/client/components/sidebar-tabs/versions-tab/utils";
import { Avatar } from "@/wab/client/components/studio/Avatar";
import {
  DefaultVersionsListItemProps,
  PlasmicVersionsListItem,
  PlasmicVersionsListItem__OverridesType,
} from "@/wab/client/plasmic/plasmic_kit_left_pane/PlasmicVersionsListItem";
import { ApiUser } from "@/wab/shared/ApiSchema";
import { fullName } from "@/wab/shared/ApiSchemaUtil";
import { HTMLElementRefOf } from "@plasmicapp/react-web";
import * as React from "react";

export type VersionsListItemProps = DefaultVersionsListItemProps & {
  onClick: () => void;
  itemDate: string | Date;
  author?: ApiUser | null;
  versionNumber?: PlasmicVersionsListItem__OverridesType["versionNumber"];
  versionTitle?: PlasmicVersionsListItem__OverridesType["versionTitle"];
  versionsTagsContainer?: PlasmicVersionsListItem__OverridesType["versionsTagsContainer"];
  btnMore?: PlasmicVersionsListItem__OverridesType["btnMore"];
  revertBtn?: PlasmicVersionsListItem__OverridesType["revertBtn"];
};

function VersionsListItem_(
  props: VersionsListItemProps,
  ref: HTMLElementRefOf<"div">
) {
  const { onClick, itemDate, author, ...rest } = props;
  const dateTime = getFormattedDate(itemDate);

  return (
    <PlasmicVersionsListItem
      listItemContainer={{
        ref,
        onClick,
        "data-test-id": `${
          rest.publish ? "publish" : "autosaved"
        }-version-item`,
      }}
      versionDateTime={{ children: `on ${dateTime}` }}
      avatarContainer={{
        children: author ? <Avatar user={author} size="small" /> : null,
      }}
      userName={{
        children: author ? fullName(author) : "Unknown User",
      }}
      {...rest}
    />
  );
}

const VersionsListItem = React.forwardRef(VersionsListItem_);
export default VersionsListItem;
