// This is a skeleton starter React component generated by Plasmic.
// This file is owned by you, feel free to edit as you see fit.
import {
  DocsTabKey,
  useDocsPortalCtx,
} from "@/wab/client/components/docs/DocsPortalCtx";
import { PublicLink } from "@/wab/client/components/PublicLink";
import {
  DefaultDocsPortalTabsProps,
  PlasmicDocsPortalTabs,
} from "@/wab/client/plasmic/plasmic_kit_docs_portal/PlasmicDocsPortalTabs";
import { APP_ROUTES } from "@/wab/shared/route/app-routes";
import { fillRoute } from "@/wab/shared/route/route";
import { Tooltip } from "antd";
import * as React from "react";

type DocsPortalTabsProps = DefaultDocsPortalTabsProps;

function DocsPortalTabs(props: DocsPortalTabsProps) {
  const docsCtx = useDocsPortalCtx();
  const projectId = docsCtx.studioCtx.siteInfo.id;
  const propsForButton = (key: DocsTabKey, tooltip: React.ReactNode) => {
    const codegenType = docsCtx.getCodegenType();
    const shouldHide = codegenType === "loader" && key === "images";
    return {
      wrap: (e) => {
        const to =
          key === "intro"
            ? fillRoute(APP_ROUTES.projectDocs, { projectId })
            : key === "components"
            ? fillRoute(APP_ROUTES.projectDocsComponents, {
                projectId: projectId,
                codegenType,
              })
            : fillRoute(APP_ROUTES.projectDocsIcons, {
                projectId: projectId,
                codegenType,
              });
        if (shouldHide) {
          return null;
        }
        return (
          <Tooltip title={tooltip} placement="right">
            <PublicLink href={to}>{e}</PublicLink>
          </Tooltip>
        );
      },
    };
  };
  return (
    <PlasmicDocsPortalTabs
      {...props}
      intro={propsForButton("intro", "Get Started")}
      components={propsForButton("components", "Components")}
      images={propsForButton("images", "Icons")}
    />
  );
}

export default DocsPortalTabs;
